<body>
    <h1>Connected Raspberry Pi Devices</h1>

    <!-- Auto-refresh every 10 seconds -->
    <script>
        setTimeout(() => {
            window.location.reload();
        }, 10000);
    </script>

    {% if pis %}
    <table>
        <tr>
            <th>Device Name</th>
            <th>Public URL</th>
            <th>Last Seen</th>
            <th>Action</th>
        </tr>
        {% for hostname, info in pis.items() %}
        <tr>
            <td>{{ hostname }}</td>
            <td><a href="{{ info.url }}" target="_blank">{{ info.url }}</a></td>
            <td>{{ info.last_seen }}</td>
            <td><a href="{{ info.url }}" target="_blank"><button>Connect</button></a></td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>No Raspberry Pi devices currently connected.</p>
    {% endif %}
</body>
